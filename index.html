<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hover Effects</title>
    <link rel="stylesheet" href="css/gsap.css">


</head>

<body class="d-flex flex-column align-items-center justify-content-start min-vh-100">
    <a class="navbar-brand" href="#"><img src="./images/pixel4inch.jpg" class="brand" style="width:150px" /></a>
    <section class="team">


        <div class="profile-images" id="profile-images">
        </div>

        <div class="profile-names">


        </div>

    </section>

</body>

<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js"></script>
<script src="scripts/g"></script>

<!---https://www.youtube.com/watch?v=yCYbH0K5Dh0--->

<!-- HTML -->
<div class="profile-names"></div>

<script>
    fetch('data/menu.json')
        .then(response => response.json())
        .then(data => {
            const profilenames = document.querySelector('.profile-names');

            const linksHtml = data.menu.map((item, index) => {
                const className = index === 0 ? 'name default' : 'name';
                return `
                    <div class="${className}">
                        <h1>${item.MTitle.toUpperCase()}</h1>
                    </div>
                `;
            }).join('');

            profilenames.innerHTML = linksHtml;

            // Optional: setActiveLink(profilenames);
        })
        .catch(error => console.error('Error loading menu:', error));
</script>



<script>
    gsap.registerPlugin(SplitText);

    document.addEventListener("DOMContentLoaded", () => {
        // Fetch menu data and generate profile images
        fetch('data/menu.json')
            .then(response => response.json())
            .then(data => {
                const menu = data.menu;
                const container = document.getElementById('profile-images');
                for (let i = 1; i < menu.length; i++) {  // skip index 0
                    const item = menu[i];
                    const div = document.createElement('div');
                    div.className = 'img';
                    const a = document.createElement('a');
                    a.className = 'nav-link';
                    a.href = item.MLink;
                    const img = document.createElement('img');
                    img.src = `./images/${String(i).padStart(2, '0')}.jpeg`;  // 01.jpeg, 02.jpeg, etc.
                    a.appendChild(img);
                    div.appendChild(a);
                    container.appendChild(div);
                }

                // Now set up GSAP after elements are created
                const profileImageContainer = document.querySelector('.profile-images');
                const profileImages = document.querySelectorAll('.profile-images .img');
                const nameElements = document.querySelectorAll('.profile-names .name');
                const nameHeadings = document.querySelectorAll('.profile-names .name h1');

                // Split all headings into chars
                nameHeadings.forEach((heading) => {
                    const splitText = new SplitText(heading, {
                        type: "chars",
                    });

                    splitText.chars.forEach((char) => {
                        char.classList.add('letter'); // ✅ changed to match querySelector
                    });
                });

                const defaultName = nameElements[0].querySelectorAll('.letter');
                gsap.set(defaultName, { y: "100%" });

                // checking for window size
                if (window.innerWidth >= 900) {
                    profileImages.forEach((img, index) => {
                        const corspondingName = nameElements[index + 1];
                        if (!corspondingName) return; // ✅ prevent error if undefined

                        const letters = corspondingName.querySelectorAll('.letter');

                        //
                        img.addEventListener("mouseenter", () => {
                            gsap.to(img, {
                                width: 140,
                                height: 140,
                                duration: 0.5,
                                ease: "power4.out"
                            });

                            gsap.to(letters, {
                                y: "-100%", // ✅ animate to visible
                                duration: 0.75, // ✅ fixed typo
                                ease: "power4.out",
                                stagger: {
                                    each: 0.025,
                                    from: "center"
                                }
                            });
                        });

                        //

                        img.addEventListener("mouseleave", () => {

                            gsap.to(img, {

                                width: 70,
                                height: 70,
                                duration: 0.5,
                                ease: "power4.out"

                            })
                            gsap.to(letters, {
                                y: "100%",
                                duration: 0.75,
                                ease: "power4.out",
                                stagger: {
                                    each: 0.025,
                                    from: "center"
                                }

                            })


                        })

                        //

                        profileImageContainer.addEventListener("mouseenter", () => {

                            gsap.to(defaultName, {

                                y: "0%",
                                duration: 0.75,
                                ease: "power4.out",
                                stagger: {
                                    each: 0.025,
                                    from: "center"
                                }

                            })

                        });

                        profileImageContainer.addEventListener("mouseleave", () => {

                            gsap.to(defaultName, {

                                y: "100%",
                                duration: 0.75,
                                ease: "power4.out",
                                stagger: {
                                    each: 0.025,
                                    from: "center"
                                }

                            })

                        })



                    });
                }
            })
            .catch(error => console.error('Error loading menu.json:', error));
    });





</script>

</html>